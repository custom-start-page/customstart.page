{"version":3,"sources":["shared/storage.min.js"],"names":["CustomStartStorage","constructor","key","set","obj","rawResponse","fetch","method","headers","body","JSON","stringify","content","json","console","log","delete","localStorage","getDefault","then","res","out","catch","err","get","inIframe","window","self","top","e","base","document","createElement","setAttribute","querySelector","appendChild"],"mappings":";;AAAA,MAAMA,kBAAN,CAAyB;AACrBC,EAAAA,WAAW,GAAG;AACV,SAAKC,GAAL,GAAW,kBAAX;AACH;;AACD,QAAMC,GAAN,CAAUC,GAAV,EAAe;AACX;AAEA,UAAMC,WAAW,GAAG,MAAMC,KAAK,CAAC,WAAD,EAAc;AACzCC,MAAAA,MAAM,EAAE,MADiC;AAEzCC,MAAAA,OAAO,EAAE;AACL,kBAAU,kBADL;AAEL,wBAAgB;AAFX,OAFgC;AAMzCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,GAAf;AANmC,KAAd,CAA/B;AASA,UAAMQ,OAAO,GAAG,MAAMP,WAAW,CAACQ,IAAZ,EAAtB;AAEAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,OAAZ;AACH;;AACDI,EAAAA,MAAM,GAAG;AACLC,IAAAA,YAAY,CAACD,MAAb,CAAoB,KAAKd,GAAzB;AACH;;AACD,QAAMgB,UAAN,GAAmB;AACf,WAAO,MAAMZ,KAAK,CAAC,WAAD,CAAL,CACRa,IADQ,CACHC,GAAG,IAAIA,GAAG,CAACP,IAAJ,EADJ,EAERM,IAFQ,CAEHE,GAAG,IAAI;AACT,aAAOA,GAAP;AACH,KAJQ,EAKRC,KALQ,CAKFC,GAAG,IAAI;AAAE,YAAMA,GAAN;AAAW,KALlB,CAAb;AAMH;;AACD,QAAMC,GAAN,GAAY;AACR;AAEA;AACA;AACA;AAEA;AAEA,WAAO,MAAMlB,KAAK,CAAC,WAAD,CAAL,CACRa,IADQ,CACHC,GAAG,IAAIA,GAAG,CAACP,IAAJ,EADJ,EAERM,IAFQ,CAEHE,GAAG,IAAI;AACT,aAAOA,GAAP;AACH,KAJQ,EAKRC,KALQ,CAKFC,GAAG,IAAI;AAAE,YAAMA,GAAN;AAAW,KALlB,CAAb;AAMH;;AA9CoB;;AAiDzB,SAASE,QAAT,GAAqB;AACjB,MAAI;AACA,WAAOC,MAAM,CAACC,IAAP,KAAgBD,MAAM,CAACE,GAA9B;AACH,GAFD,CAEE,OAAOC,CAAP,EAAU;AACR,WAAO,IAAP;AACH;AACJ;;AAED,IAAIJ,QAAQ,EAAZ,EAAgB;AACZ;AACA;AACA,QAAMK,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAb;AACAF,EAAAA,IAAI,CAACG,YAAL,CAAkB,QAAlB,EAA4B,MAA5B;AAEAF,EAAAA,QAAQ,CAACG,aAAT,CAAuB,MAAvB,EACKC,WADL,CACiBL,IADjB;AAEH","sourcesContent":["class CustomStartStorage {\r\n    constructor() {\r\n        this.key = 'customstart-data';\r\n    }\r\n    async set(obj) {\r\n        // localStorage.setItem(this.key, JSON.stringify(obj));\r\n\r\n        const rawResponse = await fetch('/api/data', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(obj)\r\n        });\r\n\r\n        const content = await rawResponse.json();\r\n\r\n        console.log(content);\r\n    }\r\n    delete() {\r\n        localStorage.delete(this.key);\r\n    }\r\n    async getDefault() {\r\n        return await fetch('/api/data')\r\n            .then(res => res.json())\r\n            .then(out => {\r\n                return out;\r\n            })\r\n            .catch(err => { throw err });\r\n    }\r\n    async get() {\r\n        // const retrievedObject = localStorage.getItem(this.key);\r\n\r\n        // if (retrievedObject) {\r\n        //     return JSON.parse(retrievedObject);\r\n        // }\r\n\r\n        // return this.getDefault();\r\n\r\n        return await fetch('/api/data')\r\n            .then(res => res.json())\r\n            .then(out => {\r\n                return out;\r\n            })\r\n            .catch(err => { throw err });\r\n    }\r\n}\r\n\r\nfunction inIframe () {\r\n    try {\r\n        return window.self !== window.top;\r\n    } catch (e) {\r\n        return true;\r\n    }\r\n}\r\n\r\nif (inIframe()) {\r\n    // Make all anchors target the top window\r\n    // https://stackoverflow.com/a/24428525\r\n    const base = document.createElement('base');\r\n    base.setAttribute('target', '_top');\r\n\r\n    document.querySelector('head')\r\n        .appendChild(base)\r\n}\r\n"],"file":"storage.min.js"}